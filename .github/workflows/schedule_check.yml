name: æŠ¢ç¥¨å®šæ—¶å·¡æ£€

on:
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘
  schedule:
    # åŒ—äº¬æ—¶é—´ 06:00 - 24:00 (UTC 22:00 - 16:00)
    - cron: '*/5 22-23 * * *'
    - cron: '*/5 0-16 * * *'

jobs:
  check-spots:
    runs-on: ubuntu-latest
    timeout-minutes: 5 # è®¾ç½®è¶…æ—¶ï¼Œé˜²æ­¢å¡æ­»

    steps:
      - name: æ‹‰å–ä»£ç 
        uses: actions/checkout@v4

      - name: è®¾ç½®Pythonç¯å¢ƒ
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'

      - name: å®‰è£…ä¾èµ–
        run: |
          pip install -r requirements.txt
          playwright install chromium

      - name: è¿è¡Œè„šæœ¬
        # ğŸ‘‡ğŸ‘‡ğŸ‘‡ é‡ç‚¹æ£€æŸ¥è¿™é‡Œï¼ğŸ‘‡ğŸ‘‡ğŸ‘‡
        # env å¿…é¡»åœ¨ run çš„åŒä¸€çº§åˆ«ï¼Œæˆ–è€…ç´§è·Ÿç€ run
        env:
          MAIL_SENDER: ${{ secrets.MAIL_SENDER }}
          MAIL_PASSWORD: ${{ secrets.MAIL_PASSWORD }}
          MAIL_RECEIVER: ${{ secrets.MAIL_RECEIVER }}
        # ğŸ‘†ğŸ‘†ğŸ‘† è¿™ä¸€å—ä¸èƒ½å°‘ï¼Œä¹Ÿä¸èƒ½ç¼©è¿›é”™è¯¯ ğŸ‘†ğŸ‘†ğŸ‘†
        run: python main.py
